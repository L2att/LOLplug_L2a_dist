import{M as e,a}from"./Right_MatchHistory-7449d7c2.js";import{L as t}from"./Left_RankedEntry-a24f738e.js";import{_ as s,m as r,D as l,r as i,o as u,c as m,d as n,n as o,I as d,F as c,U as h,K as p,g as y,w as _,f as g,q as x,a5 as v,v as f,h as w,a6 as b,a7 as k,P,a8 as I,a1 as M,a2 as N,a9 as O,t as S,s as L}from"./index-62a88a2d.js";const q={props:{add_title_class:String,team_name:String,teamkey:Object,my_team_key:Number,myteamdata_myTeam:Object,thisuser:Object},setup:()=>({thisuser:r("thisuser"),querySummonerPosition:l})},D={class:"bg-blue-800 rounded-lg hover:shadow-xl shadow-md mb-2"},T={class:"px-2 relative flex items-center justify-center py-3 text-blue-200 rounded-t-lg heading"},j={class:"w-5 h-5",style:{transform:"rotate(-5deg)"}},C=[n("use",{"xlink:href":"#layers"},null,-1)],R={class:"w-5 h-5",style:{transform:"rotate(-5deg)"}},E=[n("use",{"xlink:href":"#layers"},null,-1)],A=n("div",{class:"flex items-baseline px-4 mt-3 text-xs font-semibold text-left text-blue-300 uppercase"},[n("div",{class:"ml-2 text-base text-blue-400 w-name"},"玩家"),n("div",{class:"w-8"},"等级"),n("div",{class:"w-8"},"位置")],-1),K={class:"mt-1 text-sm text-left text-gray-100"},H=["onClick"],$={class:"absolute text-xs",style:{left:"6px"}},U={class:"flex items-center ml-2 w-name"},z={class:"mx-1 truncate"},B={class:"mx-1 truncate"},F={class:"py-0 px-2"},G={class:"w-8 truncate"},J={key:0,class:"text-xs truncate"},Q={class:"w-8 truncate"},V={key:0,class:"text-xs truncate"},W={class:"flex",style:{overflow:"auto",height:"inherit",width:"inherit"}},X={class:"inner-wrapper-sticky",style:{overflow:"auto",position:"relative","min-width":"284px"}},Y={class:"ml-6",style:{width:"inherit",height:"inherit"}},Z={name:"Myteam",components:{My_team_room:s({name:"Myteam",components:{MatchHistory:e,Letf_RankedEntry:t,Left_User_CurrentChamp:a,My_team_room_cmpt:s(q,[["render",function(e,a,t,s,r,l){const x=i("Tooltip");return u(),m("div",D,[n("div",T,[(u(),m("svg",j,C)),n("span",{class:o(["mx-4 text-lg font-semibold uppercase",t.add_title_class])},d(t.team_name),3),(u(),m("svg",R,E))]),n("div",null,[A,n("ul",K,[(u(!0),m(c,null,h(t.myteamdata_myTeam,((e,a)=>(u(),m(c,null,[e.userdata&&(e.userdata.gameName||e.userdata.displayName)?(u(),m("li",{key:a,onClick:a=>s.thisuser=e,class:o(["cursor-pointer relative flex items-center rounded-lg px-4 py-2 leading-tight bg-blue-760",{"text-yellow-500":s.thisuser===e}])},[n("div",$,d(a+1)+"P.",1),n("div",U,[n("div",{class:"flex-shrink-0 w-8 h-8 bg-center bg-cover rounded-full bg-blue-1000",style:p({"background-image":e.userdata.profileIconId?`url(https://down.qq.com/lolapp/lol/summoner/profileicon/${e.userdata.profileIconId}.jpg)`:"url(https://down.qq.com/lolapp/lol/summoner/profileicon/29.jpg)"})},null,4),y(x,{class:"mx-1 truncate"},{trigger:_((()=>[n("div",z,d(e.userdata.gameName||e.userdata.displayName),1),n("div",B,d(e.userdata.ranked||"段位获取失败"),1)])),default:_((()=>[n("div",F,"ID: "+d(e.userdata.gameName||e.userdata.displayName),1)])),_:2},1024)]),n("div",G,[e.userdata.summonerLevel?(u(),m("div",J,d(e.userdata.summonerLevel),1)):g("",!0)]),n("div",Q,[e.assignedPosition?(u(),m("div",V,d(s.querySummonerPosition(e.assignedPosition)),1)):g("",!0)])],10,H)):g("",!0)],64)))),256))])])])}]])},setup(){const e=x(!1),a=x(null),t=x(null),s=x(["teamOne","teamTwo"]),r=x(null),l=x(null);v("thisuser",t);const i=async e=>Promise.all(e.map((async e=>{const a=e.summonerId||e.obfuscatedSummonerId,t=e.puuid||e.obfuscatedPuuid;if(!a||!t)return;const[s,r]=await Promise.all([M(a),N(t)]);e.userdata=s,r&&(e.userdata.userdw=r,e.userdata.ranked=r.queueMap.RANKED_SOLO_5x5.tier?`${O(r.queueMap.RANKED_SOLO_5x5.tier)}:${"NA"===r.queueMap.RANKED_SOLO_5x5.division?"":r.queueMap.RANKED_SOLO_5x5.division}(${r.queueMap.RANKED_SOLO_5x5.leaguePoints}分)`:"无段位")})));return f((()=>{(async()=>{try{const[r,u]=await Promise.all([b(),k()]);l.value=r,"ChampSelect"===r?await(async()=>{e.value=!1;const s=await I(!1);await i(s.myTeam),a.value=s,t.value=s.myTeam[0].userdata.displayName?s.myTeam[0]:null,e.value=!0})():"InProgress"===r&&u.gameData&&await(async()=>{e.value=!1;const r=await k();r&&"InProgress"===r.phase&&(await Promise.all(s.value.map((async e=>{await i(r.gameData[e])}))),a.value=r,t.value=r.gameData.teamOne[0].userdata.displayName?r.gameData.teamOne[0]:null,e.value=!0)})()}catch(r){P.fire({icon:"error",title:"获取游戏状态失败"})}})()})),{teamkey:s,thisuser_team:r,thisphase:l,MatchHistoryloading:e,myteamdata:a,thisuser:t}}},[["render",function(e,a,t,s,r,l){const o=i("My_team_room_cmpt"),d=i("Letf_RankedEntry"),p=i("Left_User_CurrentChamp"),y=i("MatchHistory");return u(),m("div",W,[n("div",X,[(u(!0),m(c,null,h(s.teamkey,((e,a)=>(u(),m(c,null,[s.myteamdata&&"InProgress"===s.thisphase?(u(),w(o,{key:a,team_name:s.thisuser_team===e?"我方队伍":"敌方队伍",add_title_class:s.thisuser_team===e?"":"text-red-400",myteamdata_myTeam:s.myteamdata.gameData[e],thisuser:s.thisuser},null,8,["team_name","add_title_class","myteamdata_myTeam","thisuser"])):g("",!0)],64)))),256)),s.myteamdata&&"ChampSelect"===s.thisphase?(u(),w(o,{key:0,team_name:"我方队伍",myteamdata_myTeam:s.myteamdata.myTeam,thisuser:s.thisuser},null,8,["myteamdata_myTeam","thisuser"])):g("",!0),s.thisuser&&s.thisuser.userdata?(u(),m(c,{key:1},[(u(),w(d,{key:s.thisuser,userdata:s.thisuser},null,8,["userdata"])),(u(),w(p,{key:s.thisuser,puuid:s.thisuser.userdata.puuid},null,8,["puuid"]))],64)):g("",!0)]),n("div",Y,[s.thisuser?(u(),w(y,{key:s.thisuser,accountId:s.thisuser.summonerId||s.thisuser.obfuscatedSummonerId,puuid:s.thisuser.puuid||s.thisuser.obfuscatedPuuid},null,8,["accountId","puuid"])):g("",!0)])])}]])},setup(){const{gameflow_phase:e}=S(L),a=x(null);return f((()=>{})),{thisphase:a,gameflow_phase:e}}},ee={style:{height:"inherit",width:"inherit"}},ae={key:0,class:"relative flex justify-center z-10 flex-grow mx-auto mt-4 text-white page-wrapper"},te=[n("div",{class:"px-4 py-3 text-lg font-bold text-center rounded-lg bg-gradient cursor-pointer"},[n("div",{class:"py-2 hover:text-blue-100"},"游戏状态不在房间内 或 游戏中，无法获取队伍信息"),n("div",{class:"py-2 hover:text-blue-100"}," 进入房间 BAN/选 阶段后,自动显示房间内己方队伍玩家信息 "),n("div",{class:"py-2 hover:text-blue-100"}," 进入加载界面或泉水后,自动显示游戏内双方队伍玩家信息 ")],-1)],se=s(Z,[["render",function(e,a,t,s,r,l){const n=i("My_team_room");return u(),m("div",ee,["ChampSelect"!==s.gameflow_phase&&"InProgress"!==s.gameflow_phase?(u(),m("div",ae,te)):g("",!0),(u(),w(n,{key:s.gameflow_phase}))])}]]);export{se as default};
