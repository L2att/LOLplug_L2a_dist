import{M as O,a as T}from"./Right_MatchHistory-8e06cc9f.js";import{L}from"./Left_RankedEntry-4440fa26.js";import{_ as k,m as q,D as E,r as f,o,c as n,d as t,n as I,I as _,F as x,P as S,K as R,g as j,w as P,f as m,q as h,a2 as A,v as C,h as p,a3 as B,a4 as N,a5 as K,a6 as H,Z as z,$ as F,a7 as U,t as V,s as G}from"./index-29f9ddd2.js";const Z={props:{add_title_class:String,team_name:String,teamkey:Object,my_team_key:Number,myteamdata_myTeam:Object,thisuser:Object},setup(){return{thisuser:q("thisuser"),querySummonerPosition:E}}},J={class:"bg-blue-800 rounded-lg hover:shadow-xl shadow-md mb-2"},Q={class:"px-2 relative flex items-center justify-center py-3 text-blue-200 rounded-t-lg heading"},W={class:"w-5 h-5",style:{transform:"rotate(-5deg)"}},X=t("use",{"xlink:href":"#layers"},null,-1),Y=[X],$={class:"w-5 h-5",style:{transform:"rotate(-5deg)"}},ee=t("use",{"xlink:href":"#layers"},null,-1),te=[ee],ae=t("div",{class:"flex items-baseline px-4 mt-3 text-xs font-semibold text-left text-blue-300 uppercase"},[t("div",{class:"ml-2 text-base text-blue-400 w-name"},"玩家"),t("div",{class:"w-8"},"等级"),t("div",{class:"w-8"},"位置")],-1),se={class:"mt-1 text-sm text-left text-gray-100"},oe=["onClick"],ne={class:"absolute text-xs",style:{left:"6px"}},re={class:"flex items-center ml-2 w-name"},ie={class:"mx-1 truncate"},le={class:"mx-1 truncate"},ce={class:"py-0 px-2"},de={class:"w-8 truncate"},me={key:0,class:"text-xs truncate"},ue={class:"w-8 truncate"},_e={key:0,class:"text-xs truncate"};function he(i,c,l,e,w,g){const d=f("Tooltip");return o(),n("div",J,[t("div",Q,[(o(),n("svg",W,Y)),t("span",{class:I(["mx-4 text-lg font-semibold uppercase",l.add_title_class])},_(l.team_name),3),(o(),n("svg",$,te))]),t("div",null,[ae,t("ul",se,[(o(!0),n(x,null,S(l.myteamdata_myTeam,(s,y)=>(o(),n(x,null,[s.userdata&&(s.userdata.gameName||s.userdata.displayName)?(o(),n("li",{key:y,onClick:v=>e.thisuser=s,class:I(["cursor-pointer relative flex items-center rounded-lg px-4 py-2 leading-tight bg-blue-760",{"text-yellow-500":e.thisuser===s}])},[t("div",ne,_(y+1)+"P.",1),t("div",re,[t("div",{class:"flex-shrink-0 w-8 h-8 bg-center bg-cover rounded-full bg-blue-1000",style:R({"background-image":s.userdata.profileIconId?`url(https://down.qq.com/lolapp/lol/summoner/profileicon/${s.userdata.profileIconId}.jpg)`:"url(https://down.qq.com/lolapp/lol/summoner/profileicon/29.jpg)"})},null,4),j(d,{class:"mx-1 truncate"},{trigger:P(()=>[t("div",ie,_(s.userdata.gameName||s.userdata.displayName),1),t("div",le,_(s.userdata.ranked||"段位获取失败"),1)]),default:P(()=>[t("div",ce,"ID: "+_(s.userdata.gameName||s.userdata.displayName),1)]),_:2},1024)]),t("div",de,[s.userdata.summonerLevel?(o(),n("div",me,_(s.userdata.summonerLevel),1)):m("",!0)]),t("div",ue,[s.assignedPosition?(o(),n("div",_e,_(e.querySummonerPosition(s.assignedPosition)),1)):m("",!0)])],10,oe)):m("",!0)],64))),256))])])])}const ye=k(Z,[["render",he]]),pe={name:"Myteam",components:{MatchHistory:O,Letf_RankedEntry:L,Left_User_CurrentChamp:T,My_team_room_cmpt:ye},setup(){const i=h(!1),c=h(null),l=h(null),e=h(["teamOne","teamTwo"]),w=h(null),g=h(null);A("thisuser",l);const d=async()=>{try{const[a,r]=await Promise.all([B(),N()]);g.value=a,a==="ChampSelect"?await y():a==="InProgress"&&r.gameData&&await v()}catch(a){console.error("获取游戏状态失败:",a),K.fire({icon:"error",title:"获取游戏状态失败"})}},s=async a=>Promise.all(a.map(async r=>{const b=r.summonerId||r.obfuscatedSummonerId,M=r.puuid||r.obfuscatedPuuid;if(!b||!M)return;const[D,u]=await Promise.all([z(b),F(M)]);r.userdata=D,u&&(r.userdata.userdw=u,r.userdata.ranked=u.queueMap.RANKED_SOLO_5x5.tier?`${U(u.queueMap.RANKED_SOLO_5x5.tier)}:${u.queueMap.RANKED_SOLO_5x5.division==="NA"?"":u.queueMap.RANKED_SOLO_5x5.division}(${u.queueMap.RANKED_SOLO_5x5.leaguePoints}分)`:"无段位")})),y=async()=>{i.value=!1;const a=await H(!1);await s(a.myTeam),c.value=a,l.value=a.myTeam[0].userdata.displayName?a.myTeam[0]:null,i.value=!0},v=async()=>{i.value=!1;const a=await N();!a||a.phase!=="InProgress"||(await Promise.all(e.value.map(async r=>{await s(a.gameData[r])})),c.value=a,l.value=a.gameData.teamOne[0].userdata.displayName?a.gameData.teamOne[0]:null,i.value=!0)};return C(()=>{d()}),{teamkey:e,thisuser_team:w,thisphase:g,MatchHistoryloading:i,myteamdata:c,thisuser:l}}},fe={class:"flex",style:{overflow:"auto",height:"inherit",width:"inherit"}},ge={class:"inner-wrapper-sticky",style:{overflow:"auto",position:"relative","min-width":"284px"}},xe={class:"ml-6",style:{width:"inherit",height:"inherit"}};function we(i,c,l,e,w,g){const d=f("My_team_room_cmpt"),s=f("Letf_RankedEntry"),y=f("Left_User_CurrentChamp"),v=f("MatchHistory");return o(),n("div",fe,[t("div",ge,[(o(!0),n(x,null,S(e.teamkey,(a,r)=>(o(),n(x,null,[e.myteamdata&&e.thisphase==="InProgress"?(o(),p(d,{key:r,team_name:e.thisuser_team===a?"我方队伍":"敌方队伍",add_title_class:e.thisuser_team===a?"":"text-red-400",myteamdata_myTeam:e.myteamdata.gameData[a],thisuser:e.thisuser},null,8,["team_name","add_title_class","myteamdata_myTeam","thisuser"])):m("",!0)],64))),256)),e.myteamdata&&e.thisphase==="ChampSelect"?(o(),p(d,{key:0,team_name:"我方队伍",myteamdata_myTeam:e.myteamdata.myTeam,thisuser:e.thisuser},null,8,["myteamdata_myTeam","thisuser"])):m("",!0),e.thisuser&&e.thisuser.userdata?(o(),n(x,{key:1},[(o(),p(s,{key:e.thisuser,userdata:e.thisuser},null,8,["userdata"])),(o(),p(y,{key:e.thisuser,accountId:e.thisuser.userdata.summonerId||e.thisuser.userdata.obfuscatedSummonerId},null,8,["accountId"]))],64)):m("",!0)]),t("div",xe,[e.thisuser?(o(),p(v,{key:e.thisuser,accountId:e.thisuser.summonerId||e.thisuser.obfuscatedSummonerId,puuid:e.thisuser.puuid||e.thisuser.obfuscatedPuuid},null,8,["accountId","puuid"])):m("",!0)])])}const ve=k(pe,[["render",we]]),ke={name:"Myteam",components:{My_team_room:ve},setup(){const{gameflow_phase:i}=V(G),c=h(null);return C(()=>{}),{thisphase:c,gameflow_phase:i}}},be={style:{height:"inherit",width:"inherit"}},Me={key:0,class:"relative flex justify-center z-10 flex-grow mx-auto mt-4 text-white page-wrapper"},Ie=t("div",{class:"px-4 py-3 text-lg font-bold text-center rounded-lg bg-gradient cursor-pointer"},[t("div",{class:"py-2 hover:text-blue-100"},"游戏状态不在房间内 或 游戏中，无法获取队伍信息"),t("div",{class:"py-2 hover:text-blue-100"}," 进入房间 BAN/选 阶段后,自动显示房间内己方队伍玩家信息 "),t("div",{class:"py-2 hover:text-blue-100"}," 进入加载界面或泉水后,自动显示游戏内双方队伍玩家信息 ")],-1),Pe=[Ie];function Ne(i,c,l,e,w,g){const d=f("My_team_room");return o(),n("div",be,[e.gameflow_phase!=="ChampSelect"&&e.gameflow_phase!=="InProgress"?(o(),n("div",Me,Pe)):m("",!0),(o(),p(d,{key:e.gameflow_phase}))])}const Oe=k(ke,[["render",Ne]]);export{Oe as default};
